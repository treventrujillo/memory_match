(function(){App.ns("Controls.Dashboard.IndexController",App.Control({init:function(){return this.loadTrainerChallenge(),this.trackingName="Dashboard",this.track("Loaded",{view:App.data.view}),this.discourseScroll=new App.Controls.InfiniteScroll(".comments-list"),$(".medium-feed-link a").prop("target","blog")},events:{".personal-trainer .dropdown dd:not(.is-active) click":function(e){return this.loadTrainerChallenge()},".personal-trainer .play-btn click":function(e){return this.train(),this.track("Train Clicked")},".personal-trainer .skip-btn click":function(e){return this.loadTrainerChallenge(!0),this.track("Skip Clicked")},"#explore a click":function(e){return this.track("Explore Link Clicked",{tag:e.text()})},"#tell_me_more_referrals click":function(e){return $("#referrals").slideDown(500),e.fadeOut(800),App.track("Referrals Info Clicked",{page:"Dashboard"})},"#discourse_filters a:not(.is-active) click":function(e,t){return this.loadDiscourse(e.data("view-id")),this.track("Discourse Filter Clicked")}},loadDiscourse:function(e){return App.replaceHistoryState(App.route("discourse",{view_id:e})),this.discourseScroll.replaceLoad(),$("#discourse_filters .is-active").removeClass("is-active"),$("#discourse_filters [data-view-id='"+e+"']").addClass("is-active")},trainerRouteParams:function(){return{language:$("#trainer_language dd.is-active").data("language")||App.currentUser.current_language,strategy:$("#trainer_strategy dd.is-active").data("strategy")}},train:function(e){var t;if(this.trainerData){t=this.trainerRouteParams(),t.id=this.trainerData.id;if(t.id)return App.load(App.route("train",t))}else if(!e)return this.loadTrainerChallenge(!0,!0)},loadTrainerChallenge:function(e,t){var n,r,i;i=$("#personal_trainer_next_challenge").view();if(i)return n=this.trainerRouteParams(),r=App.route("peek",n),$.get(r,{dequeue:!!e},function(e){return function(n){i.render({data:n}),e.trainerData=n;if(t)return e.train(!1)}}(this))},track:function(e,t){return t==null&&(t={}),App.track("Dashboard: "+e,t),App.debug("Dashboard: "+e+" Tracked")}}))}).call(this),function(){App.ns("Controls.Dashboard.PersonalTrainer",App.Control({init:function(){}}))}.call(this);